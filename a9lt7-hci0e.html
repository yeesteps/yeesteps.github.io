<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="generator" content="Aspose.Words for .NET 17.1.0.0" /><title></title></head><body><div><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">import React, { useState, useEffect, useRef } from 'react';</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">import {</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">User, BookOpen, Heart, DollarSign, MapPin,</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">Clock, Activity, Users, Coffee, Bus, GraduationCap,</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">Briefcase, Smile, Frown, AlertTriangle, Cat, HeartHandshake,</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">Ghost, Utensils, RotateCcw, Building</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">} from 'lucide-react';</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">// --- 1. Constants &amp; Game Data ---</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">// </span><span style="font-family:'Microsoft JhengHei'">è¿·å› é ­åƒ</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">const AVATARS = [</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">{ id: 'smug', icon: 'ğŸ˜¼', name: '</span><span style="font-family:'Microsoft JhengHei'">è‡ªä¿¡</span><span style="font-family:'Courier New'">', desc: '</span><span style="font-family:'Microsoft JhengHei'">æˆ‘å°±ä¿‚è¦å±ˆæ©Ÿ</span><span style="font-family:'Courier New'">' },</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">{ id: 'crying', icon: 'ğŸ˜¿', name: '</span><span style="font-family:'Microsoft JhengHei'">å§”å±ˆ</span><span style="font-family:'Courier New'">', desc: 'GPA...</span><span style="font-family:'Microsoft JhengHei'">ä¸è¦å†è·Œäº†</span><span style="font-family:'Courier New'">' },</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">{ id: 'shocked', icon: 'ğŸ™€', name: '</span><span style="font-family:'Microsoft JhengHei'">é©šåš‡</span><span style="font-family:'Courier New'">', desc: 'Deadlines?!' },</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">{ id: 'love', icon: 'ğŸ˜»', name: '</span><span style="font-family:'Microsoft JhengHei'">æˆ€æ„›</span><span style="font-family:'Courier New'">', desc: '</span><span style="font-family:'Microsoft JhengHei'">æƒ³æ‹æ‹–</span><span style="font-family:'Courier New'">...' },</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">{ id: 'cool', icon: 'ğŸ˜', name: '</span><span style="font-family:'Microsoft JhengHei'">æˆ´è¶…</span><span style="font-family:'Courier New'">', desc: 'Soc</span><span style="font-family:'Microsoft JhengHei'">æˆ¿æˆ‘è©±äº‹</span><span style="font-family:'Courier New'">' },</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">{ id: 'sleepy', icon: 'ğŸ˜´', name: '</span><span style="font-family:'Microsoft JhengHei'">çœ¼ç“</span><span style="font-family:'Courier New'">', desc: '</span><span style="font-family:'Microsoft JhengHei'">æ—©å…«ä¸äº†</span><span style="font-family:'Courier New'">' },</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">{ id: 'clown', icon: 'ğŸ¤¡', name: '</span><span style="font-family:'Microsoft JhengHei'">å°ä¸‘</span><span style="font-family:'Courier New'">', desc: '</span><span style="font-family:'Microsoft JhengHei'">åˆæ˜¯ç•¶å°ä¸‘çš„ä¸€å¤©</span><span style="font-family:'Courier New'">' },</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">{ id: 'devil', icon: 'ğŸ˜ˆ', name: '</span><span style="font-family:'Microsoft JhengHei'">æƒ¡é­”</span><span style="font-family:'Courier New'">', desc: '</span><span style="font-family:'Microsoft JhengHei'">æˆ‘è¦ç©çˆ›å€‹</span><span style="font-family:'Courier New'">Grade' },</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">];</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">// </span><span style="font-family:'Microsoft JhengHei'">åˆå§‹äººéš›é—œä¿‚</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">const INITIAL_RELATIONSHIPS = [</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">{ id: 'roommate', name: '</span><span style="font-family:'Microsoft JhengHei'">å¥½å¿ƒå®¿å‹</span><span style="font-family:'Courier New'">', level: 50, max: 100, desc: '</span><span style="font-family:'Microsoft JhengHei'">æœƒå¹«ä½ ç•™é–€çš„å¥½äºº</span><span style="font-family:'Courier New'">' },</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">{ id: 'prof', name: '</span><span style="font-family:'Microsoft JhengHei'">åš´å²æ•™æˆ</span><span style="font-family:'Courier New'">', level: 30, max: 100, desc: '</span><span style="font-family:'Microsoft JhengHei'">æŒæ¡ä½ </span><span style="font-family:'Courier New'">GPA</span><span style="font-family:'Microsoft JhengHei'">ç”Ÿæ®ºå¤§æ¬Š</span><span style="font-family:'Courier New'">' },</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">{ id: 'crush', name: '</span><span style="font-family:'Microsoft JhengHei'">å¿ƒå„€å°è±¡</span><span style="font-family:'Courier New'">', level: 10, max: 100, desc: '</span><span style="font-family:'Microsoft JhengHei'">å¯é è§€è€Œä¸å¯è¤»ç©</span><span style="font-family:'Courier New'">' },</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">{ id: 'canteen_lady', name: '</span><span style="font-family:'Microsoft JhengHei'">é£¯å ‚é˜¿å§</span><span style="font-family:'Courier New'">', level: 40, max: 100, desc: '</span><span style="font-family:'Microsoft JhengHei'">é—œä¿‚å¥½æœƒå¤šçµ¦ä½ å…©å¡Šè‚‰</span><span style="font-family:'Courier New'">' },</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">];</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">const FACULTIES = [</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">{ id: 'arts', name: '</span><span style="font-family:'Microsoft JhengHei'">æ–‡å­¸é™¢</span><span style="font-family:'Courier New'">', buff: 'social', description: '</span><span style="font-family:'Microsoft JhengHei'">æ°£è³ªå„ªé›…</span><span style="font-family:'Courier New'">ï¼Œ</span><span style="font-family:'Microsoft JhengHei'">ç¤¾äº¤</span><span style="font-family:'Courier New'">+10', initStats: { energy: 90, stress: 10, knowledge: 10, social: 40 } },</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">{ id: 'socsci', name: '</span><span style="font-family:'Microsoft JhengHei'">ç¤¾ç§‘é™¢</span><span style="font-family:'Courier New'">', buff: 'balanced', description: '</span><span style="font-family:'Microsoft JhengHei'">é—œå¿ƒç¤¾æœƒ</span><span style="font-family:'Courier New'">ï¼Œ</span><span style="font-family:'Microsoft JhengHei'">å¹³å‡å‹</span><span style="font-family:'Courier New'">', initStats: { energy: 95, stress: 15, knowledge: 20, social: 30 } },</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">{ id: 'law', name: '</span><span style="font-family:'Microsoft JhengHei'">æ³•å¾‹å­¸é™¢</span><span style="font-family:'Courier New'">', buff: 'knowledge', description: '</span><span style="font-family:'Microsoft JhengHei'">é‚è¼¯ç¸å¯†</span><span style="font-family:'Courier New'">ï¼Œ</span><span style="font-family:'Microsoft JhengHei'">çŸ¥è­˜</span><span style="font-family:'Courier New'">+10', initStats: { energy: 85, stress: 30, knowledge: 40, social: 15 } },</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">{ id: 'edu', name: '</span><span style="font-family:'Microsoft JhengHei'">æ•™è‚²å­¸é™¢</span><span style="font-family:'Courier New'">', buff: 'stamina', description: '</span><span style="font-family:'Microsoft JhengHei'">å……æ»¿ç†±èª </span><span style="font-family:'Courier New'">ï¼Œ</span><span style="font-family:'Microsoft JhengHei'">é«”åŠ›</span><span style="font-family:'Courier New'">+10', initStats: { energy: 100, stress: 10, knowledge: 20, social: 25 } },</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">{ id: 'sci', name: '</span><span style="font-family:'Microsoft JhengHei'">ç†å­¸é™¢</span><span style="font-family:'Courier New'">', buff: 'logic', description: '</span><span style="font-family:'Microsoft JhengHei'">æ¢ç´¢çœŸç†</span><span style="font-family:'Courier New'">ï¼Œ</span><span style="font-family:'Microsoft JhengHei'">çŸ¥è­˜é«˜</span><span style="font-family:'Courier New'">', initStats: { energy: 90, stress: 20, knowledge: 35, social: 10 } },</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">{ id: 'ba', name: '</span><span style="font-family:'Microsoft JhengHei'">å•†å­¸é™¢</span><span style="font-family:'Courier New'">', buff: 'money', description: '</span><span style="font-family:'Microsoft JhengHei'">å•†æ¥­é ­è…¦</span><span style="font-family:'Courier New'">ï¼Œ</span><span style="font-family:'Microsoft JhengHei'">é‡‘éŒ¢</span><span style="font-family:'Courier New'">UP', initStats: { energy: 90, stress: 25, knowledge: 25, social: 35 } },</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">{ id: 'eng', name: '</span><span style="font-family:'Microsoft JhengHei'">å·¥ç¨‹å­¸é™¢</span><span style="font-family:'Courier New'">', buff: 'tech', description: '</span><span style="font-family:'Microsoft JhengHei'">çˆ†è‚å±¬æ€§</span><span style="font-family:'Courier New'">ï¼Œ</span><span style="font-family:'Microsoft JhengHei'">é«”åŠ›ä¸Šé™é«˜</span><span style="font-family:'Courier New'">', initStats: { energy: 110, stress: 20, knowledge: 30, social: 5 } },</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">{ id: 'med', name: '</span><span style="font-family:'Microsoft JhengHei'">é†«å­¸é™¢</span><span style="font-family:'Courier New'">', buff: 'hardcore', description: '</span><span style="font-family:'Microsoft JhengHei'">ç²¾è‹±ä¸­çš„ç²¾è‹±</span><span style="font-family:'Courier New'">ï¼Œ</span><span style="font-family:'Microsoft JhengHei'">æ¥µé«˜å£“</span><span style="font-family:'Courier New'">', initStats: { energy: 80, stress: 40, knowledge: 50, social: 10 } },</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">];</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">// </span><span style="font-family:'Microsoft JhengHei'">æ›´æ–°åœ°é»</span><span style="font-family:'Courier New'">ï¼š</span><span style="font-family:'Microsoft JhengHei'">æ–°å¢èª²å®¤</span><span style="font-family:'MS Gothic'">ã€</span><span style="font-family:'Microsoft JhengHei'">è¾¦å…¬å®¤</span><span style="font-family:'MS Gothic'">ã€</span><span style="font-family:'Microsoft JhengHei'">é£¯å ‚</span><span style="font-family:'Courier New'">ï¼›</span><span style="font-family:'Microsoft JhengHei'">ç§»é™¤æ–°äº</span><span style="font-family:'MS Gothic'">ã€</span><span style="font-family:'Microsoft JhengHei'">è¯åˆ</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">const LOCATIONS = [</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">{ id: 'dorm', name: '</span><span style="font-family:'Microsoft JhengHei'">å­¸ç”Ÿå®¿èˆ</span><span style="font-family:'Courier New'">', color: 'bg-orange-100', description: '</span><span style="font-family:'Microsoft JhengHei'">ä½ çš„æº«æš–å°çª©</span><span style="font-family:'Courier New'">ï¼Œ</span><span style="font-family:'Microsoft JhengHei'">é©åˆä¼‘æ¯å’Œæ•´ç†å„€å®¹</span><span style="font-family:'MS Gothic'">ã€‚</span><span style="font-family:'Courier New'">', actions: ['rest', 'play_game', 'chat_roommate'] },</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">{ id: 'mall', name: '</span><span style="font-family:'Microsoft JhengHei'">ç™¾è¬å¤§é“</span><span style="font-family:'Courier New'">', color: 'bg-gray-200', description: '</span><span style="font-family:'Microsoft JhengHei'">æ ¡åœ’å¿ƒè‡Ÿ</span><span style="font-family:'Courier New'">ï¼ŒDem Beat </span><span style="font-family:'Microsoft JhengHei'">è–åœ°</span><span style="font-family:'MS Gothic'">ã€‚</span><span style="font-family:'Courier New'">', actions: ['walk', 'dem_beat_practice', 'society_promotion'] },</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">{ id: 'library', name: '</span><span style="font-family:'Microsoft JhengHei'">å¤§å­¸åœ–æ›¸é¤¨</span><span style="font-family:'Courier New'">', color: 'bg-blue-100', description: '</span><span style="font-family:'Microsoft JhengHei'">é€²ä¿®è–åœ°</span><span style="font-family:'Courier New'"> (UL)ï¼Œ</span><span style="font-family:'Microsoft JhengHei'">è€ƒè©¦æœŸé–“å……æ»¿æ®ºæ°£</span><span style="font-family:'MS Gothic'">ã€‚</span><span style="font-family:'Courier New'">', actions: ['study', 'research', 'sleep_library'] },</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">{ id: 'lake', name: '</span><span style="font-family:'Microsoft JhengHei'">æœªåœ“æ¹–</span><span style="font-family:'Courier New'">', color: 'bg-green-100', description: '</span><span style="font-family:'Microsoft JhengHei'">å´‡åŸºå­¸é™¢çš„ç¾éº—æ¹–ç•”</span><span style="font-family:'Courier New'">ï¼Œ</span><span style="font-family:'Microsoft JhengHei'">é©åˆæ‹æ‹–</span><span style="font-family:'MS Gothic'">ã€‚</span><span style="font-family:'Courier New'">', actions: ['date_walk', 'feed_birds', 'meditate'] },</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">{ id: 'station', name: '</span><span style="font-family:'Microsoft JhengHei'">å¤§å­¸ç«™</span><span style="font-family:'Courier New'">', color: 'bg-indigo-100', description: '</span><span style="font-family:'Microsoft JhengHei'">é€£æ¥ç¾å¯¦ä¸–ç•Œçš„å‡ºå£</span><span style="font-family:'MS Gothic'">ã€‚</span><span style="font-family:'Courier New'">', actions: ['part_time', 'shop', 'slacking'] },</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">// </span><span style="font-family:'Microsoft JhengHei'">æ–°å¢åœ°é»</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">{ id: 'classroom', name: '</span><span style="font-family:'Microsoft JhengHei'">èª²å®¤</span><span style="font-family:'Courier New'">', color: 'bg-emerald-100', description: '</span><span style="font-family:'Microsoft JhengHei'">å­¸ç¿’èˆ‡è†è½æ•™æˆæ•™èª¨çš„åœ°æ–¹</span><span style="font-family:'MS Gothic'">ã€‚</span><span style="font-family:'Courier New'">', actions: ['attend_class', 'sleep_class', 'social_group'] },</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">{ id: 'prof_office', name: '</span><span style="font-family:'Microsoft JhengHei'">æ•™æˆè¾¦å…¬å®¤</span><span style="font-family:'Courier New'">', color: 'bg-purple-100', description: '</span><span style="font-family:'Microsoft JhengHei'">é¼“èµ·å‹‡æ°£èˆ‡æ•™æˆé¢è«‡</span><span style="font-family:'Courier New'">ï¼Œ</span><span style="font-family:'Microsoft JhengHei'">å°‹æ±‚æŒ‡å°</span><span style="font-family:'MS Gothic'">ã€‚</span><span style="font-family:'Courier New'">', actions: ['ask_prof_guidance', 'submit_assignment'] },</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">{ id: 'canteen', name: '</span><span style="font-family:'Microsoft JhengHei'">é£¯å ‚</span><span style="font-family:'Courier New'"> (</span><span style="font-family:'Microsoft JhengHei'">çœ¾å¿—å ‚</span><span style="font-family:'Courier New'">)', color: 'bg-orange-200', description: '</span><span style="font-family:'Microsoft JhengHei'">è§£æ±ºæº«é£½å’Œèªè­˜æ–°æœ‹å‹çš„åœ°æ–¹</span><span style="font-family:'MS Gothic'">ã€‚</span><span style="font-family:'Courier New'">', actions: ['eat_canteen', 'gossip', 'eat_expensive'] },</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">];</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">// </span><span style="font-family:'Microsoft JhengHei'">æ›´æ–°è¡Œå‹•è³‡æ–™åº«</span><span style="font-family:'Courier New'">ï¼š</span><span style="font-family:'Microsoft JhengHei'">æ–°å¢èª²ç¨‹ç›¸é—œè¡Œå‹•</span><span style="font-family:'Courier New'">ï¼Œ</span><span style="font-family:'Microsoft JhengHei'">ä¸¦èª¿æ•´éƒ¨åˆ†èˆŠè¡Œå‹•</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">const ACTIONS_DB = {</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">// </span><span style="font-family:'Microsoft JhengHei'">åŸºç¤ç”Ÿå­˜</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">rest: { label: '</span><span style="font-family:'Microsoft JhengHei'">ç¡è¦ºè£œçœ </span><span style="font-family:'Courier New'">', energy: 40, stress: -20, knowledge: 0, social: 0, money: 0, time: 3, msg: '</span><span style="font-family:'Microsoft JhengHei'">ä½ åœ¨åºŠä¸Šç¡å¾—å¾ˆé¦™</span><span style="font-family:'Courier New'">ï¼Œ</span><span style="font-family:'Microsoft JhengHei'">ç²¾ç¥é£½æ»¿</span><span style="font-family:'Courier New'">ï¼' },</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">play_game: { label: '</span><span style="font-family:'Microsoft JhengHei'">é€šå®µæ‰“æ©Ÿ</span><span style="font-family:'Courier New'">', energy: -10, stress: -20, knowledge: -2, social: 5, money: 0, time: 4, msg: '</span><span style="font-family:'Microsoft JhengHei'">é›–ç„¶é»‘çœ¼åœˆåŠ æ·±äº†</span><span style="font-family:'Courier New'">ï¼Œ</span><span style="font-family:'Microsoft JhengHei'">ä½†å¿ƒæƒ…èˆ’æš¢</span><span style="font-family:'MS Gothic'">ã€‚</span><span style="font-family:'Courier New'">' },</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">// </span><span style="font-family:'Microsoft JhengHei'">ç¤¾äº¤èˆ‡äººéš›</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">chat_roommate: { label: '</span><span style="font-family:'Microsoft JhengHei'">èˆ‡å®¿å‹å®µå¤œ</span><span style="font-family:'Courier New'">', energy: 10, stress: -10, knowledge: 0, social: 10, money: -40, time: 2, npc: 'roommate', npcVal: 10, msg: '</span><span style="font-family:'Microsoft JhengHei'">ä½ å€‘èŠäº†å¾ˆå¤šå…«å¦</span><span style="font-family:'Courier New'">ï¼Œ</span><span style="font-family:'Microsoft JhengHei'">å®¿å‹å°ä½ å¥½æ„Ÿåº¦ä¸Šå‡</span><span style="font-family:'MS Gothic'">ã€‚</span><span style="font-family:'Courier New'">' },</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">society_promotion: { label: '</span><span style="font-family:'Microsoft JhengHei'">ä¸ŠèŠå®£å‚³</span><span style="font-family:'Courier New'">', energy: -20, stress: 10, knowledge: 0, social: 20, money: 0, time: 3, msg: '</span><span style="font-family:'Microsoft JhengHei'">ä½ å¤§å–Šå£è™Ÿæ‹‰äººå…¥æœƒ</span><span style="font-family:'Courier New'">ï¼Œ</span><span style="font-family:'Microsoft JhengHei'">å–‰åš¨éƒ½å•äº†</span><span style="font-family:'MS Gothic'">ã€‚</span><span style="font-family:'Courier New'">' },</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">date_walk: { label: '</span><span style="font-family:'Microsoft JhengHei'">æ¹–é‚Šæ•£æ­¥</span><span style="font-family:'Courier New'">', energy: -10, stress: -15, knowledge: 0, social: 15, money: 0, time: 2, npc: 'crush', npcVal: 15, msg: '</span><span style="font-family:'Microsoft JhengHei'">æ°£æ°›ä¸éŒ¯</span><span style="font-family:'Courier New'">ï¼Œ</span><span style="font-family:'Microsoft JhengHei'">é€™å°±æ˜¯é’æ˜¥å—</span><span style="font-family:'Courier New'">ï¼Ÿ(</span><span style="font-family:'Microsoft JhengHei'">å¿ƒå„€å°è±¡å¥½æ„Ÿ</span><span style="font-family:'Courier New'">UP)' },</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">// </span><span style="font-family:'Microsoft JhengHei'">å­¸æ¥­</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">study: { label: '</span><span style="font-family:'Microsoft JhengHei'">æº«ç¿’ç­†è¨˜</span><span style="font-family:'Courier New'">', energy: -15, stress: 10, knowledge: 15, social: -5, money: 0, time: 2, npc: 'prof', npcVal: 2, msg: '</span><span style="font-family:'Microsoft JhengHei'">ä½ æ„Ÿåˆ°çŸ¥è­˜é€šéçœ¼ç›é€²å…¥äº†å¤§è…¦</span><span style="font-family:'MS Gothic'">ã€‚</span><span style="font-family:'Courier New'">' },</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">research: { label: '</span><span style="font-family:'Microsoft JhengHei'">è¶•</span><span style="font-family:'Courier New'"> Paper', energy: -25, stress: 25, knowledge: 25, social: -10, money: 0, time: 3, msg: '</span><span style="font-family:'Microsoft JhengHei'">æ­»ç·šæˆ°å£«å‡ºå‹•</span><span style="font-family:'Courier New'">ï¼' },</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">sleep_library: { label: '</span><span style="font-family:'Microsoft JhengHei'">åœ–æ›¸é¤¨è£œçœ </span><span style="font-family:'Courier New'">', energy: 15, stress: -5, knowledge: 2, social: -2, money: 0, time: 1, msg: '</span><span style="font-family:'Microsoft JhengHei'">è¶´åœ¨æ›¸ä¸Šç¡ç‰¹åˆ¥é¦™</span><span style="font-family:'Courier New'">ï¼Œ</span><span style="font-family:'Microsoft JhengHei'">é‚„å¸æ”¶äº†æ›¸æœ¬çš„ç²¾è¯</span><span style="font-family:'Courier New'">ï¼Ÿ' },</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">// </span><span style="font-family:'Microsoft JhengHei'">ç‰¹æ®Šèˆ‡ä¼‘é–’</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">dem_beat_practice: { label: '</span><span style="font-family:'Microsoft JhengHei'">ç·´ç¿’</span><span style="font-family:'Courier New'"> Dem Beat', energy: -20, stress: 5, knowledge: 0, social: 15, money: 0, time: 2, msg: '</span><span style="font-family:'Microsoft JhengHei'">æç›¡ç„¡æ‚”</span><span style="font-family:'Courier New'">ï¼</span><span style="font-family:'Microsoft JhengHei'">å±±åŸç²¾ç¥</span><span style="font-family:'Courier New'">ï¼' },</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">meditate: { label: '</span><span style="font-family:'Microsoft JhengHei'">åœ¨æ¹–é‚Šæ²‰æ€</span><span style="font-family:'Courier New'">', energy: 5, stress: -30, knowledge: 5, social: 0, money: 0, time: 1, msg: '</span><span style="font-family:'Microsoft JhengHei'">ä½ åœ¨æ¹–ç•”çš„é•·æ¤…ä¸Šæ²‰æ€</span><span style="font-family:'Courier New'">ï¼Œ</span><span style="font-family:'Microsoft JhengHei'">å…§å¿ƒå¹³éœ</span><span style="font-family:'MS Gothic'">ã€‚</span><span style="font-family:'Courier New'">' }, // </span><span style="font-family:'Microsoft JhengHei'">èª¿æ•´æè¿°</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">// </span><span style="font-family:'Microsoft JhengHei'">å…¼è·èˆ‡æ¶ˆè²»</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">shop: { label: '</span><span style="font-family:'Microsoft JhengHei'">è¶…å¸‚å…¥è²¨</span><span style="font-family:'Courier New'">', energy: 5, stress: -5, knowledge: 0, social: 0, money: -80, time: 1, msg: '</span><span style="font-family:'Microsoft JhengHei'">è²·äº†ä¸€å †é›¶é£Ÿå’Œæ¯éºµ</span><span style="font-family:'MS Gothic'">ã€‚</span><span style="font-family:'Courier New'">' },</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">part_time: { label: '</span><span style="font-family:'Microsoft JhengHei'">å…¼è·è£œç¿’</span><span style="font-family:'Courier New'">', energy: -25, stress: 15, knowledge: 2, social: 0, money: 250, time: 3, msg: '</span><span style="font-family:'Microsoft JhengHei'">æ•™å°å­¸ç”ŸåšåŠŸèª²</span><span style="font-family:'Courier New'">ï¼Œ</span><span style="font-family:'Microsoft JhengHei'">è³ºå¾—ç›†æ»¿ç¼½æ»¿</span><span style="font-family:'MS Gothic'">ã€‚</span><span style="font-family:'Courier New'">' },</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">// </span><span style="font-family:'Microsoft JhengHei'">å…¶ä»–</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">walk: { label: '</span><span style="font-family:'Microsoft JhengHei'">æ•£æ­¥</span><span style="font-family:'Courier New'">', energy: -5, stress: -5, knowledge: 0, social: 0, money: 0, time: 1, msg: '</span><span style="font-family:'Microsoft JhengHei'">èµ°èµ°é€›é€›</span><span style="font-family:'MS Gothic'">ã€‚</span><span style="font-family:'Courier New'">' },</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">slacking: { label: '</span><span style="font-family:'Microsoft JhengHei'">ç¿¹èª²</span><span style="font-family:'Courier New'">', energy: 10, stress: -10, knowledge: -5, social: 5, money: 0, time: 2, npc: 'prof', npcVal: -10, msg: '</span><span style="font-family:'Microsoft JhengHei'">å·å¾—æµ®ç”ŸåŠæ—¥é–’</span><span style="font-family:'Courier New'">ï¼Œ</span><span style="font-family:'Microsoft JhengHei'">ä½†æ•™æˆå¥½åƒè¨˜ä½äº†ä½ çš„åå­—</span><span style="font-family:'Courier New'">...' },</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">feed_birds: { label: '</span><span style="font-family:'Microsoft JhengHei'">é¤µé›€</span><span style="font-family:'Courier New'">', energy: -5, stress: -10, knowledge: 2, social: 0, money: -10, time: 1, msg: '</span><span style="font-family:'Microsoft JhengHei'">æœªåœ“æ¹–çš„é³¥éƒ½è¢«ä½ é¤µèƒ–äº†</span><span style="font-family:'MS Gothic'">ã€‚</span><span style="font-family:'Courier New'">' },</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">// </span><span style="font-family:'Microsoft JhengHei'">é£¯å ‚è¡Œå‹•</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">eat_canteen: { label: '</span><span style="font-family:'Microsoft JhengHei'">åƒé ¹é£¯</span><span style="font-family:'Courier New'">', energy: 25, stress: 5, knowledge: 0, social: 0, money: -25, time: 1, npc: 'canteen_lady', npcVal: 5, msg: '</span><span style="font-family:'Microsoft JhengHei'">é˜¿å§ä»Šå¤©å¿ƒæƒ…å¥½</span><span style="font-family:'Courier New'">ï¼Œ</span><span style="font-family:'Microsoft JhengHei'">å¤šçµ¦äº†ä½ ä¸€æ¢èœ</span><span style="font-family:'MS Gothic'">ã€‚</span><span style="font-family:'Courier New'">' },</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">gossip: { label: '</span><span style="font-family:'Microsoft JhengHei'">å…«å¦æ˜¯é</span><span style="font-family:'Courier New'">', energy: -5, stress: -10, knowledge: 0, social: 10, money: 0, time: 1, msg: '</span><span style="font-family:'Microsoft JhengHei'">ä½ å’Œæœ‹å‹äº¤æ›äº†æœ€æ–°çš„æ ¡åœ’å…«å¦</span><span style="font-family:'Courier New'">ï¼Œ</span><span style="font-family:'Microsoft JhengHei'">å¿ƒæƒ…èˆ’æš¢</span><span style="font-family:'MS Gothic'">ã€‚</span><span style="font-family:'Courier New'">' },</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">eat_expensive: { label: '</span><span style="font-family:'Microsoft JhengHei'">é£Ÿå¥½å•²</span><span style="font-family:'Courier New'"> (</span><span style="font-family:'Microsoft JhengHei'">çŠ’å‹è‡ªå·±</span><span style="font-family:'Courier New'">)', energy: 35, stress: -15, knowledge: 0, social: 5, money: -120, time: 1, msg: '</span><span style="font-family:'Microsoft JhengHei'">å¥¢ä¾ˆäº†ä¸€é “</span><span style="font-family:'Courier New'">ï¼Œ</span><span style="font-family:'Microsoft JhengHei'">å¿ƒæƒ…å’Œé«”åŠ›éƒ½å¤§å¤§æå‡</span><span style="font-family:'Courier New'">ï¼' },</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">// </span><span style="font-family:'Microsoft JhengHei'">èª²å®¤è¡Œå‹•</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">attend_class: { label: '</span><span style="font-family:'Microsoft JhengHei'">ä¸Šèª²è½è¬›</span><span style="font-family:'Courier New'">', energy: -15, stress: 5, knowledge: 10, social: 0, money: 0, time: 2, msg: '</span><span style="font-family:'Microsoft JhengHei'">é›–ç„¶å·®é»ç¡è‘—</span><span style="font-family:'Courier New'">ï¼Œ</span><span style="font-family:'Microsoft JhengHei'">ä½†è‡³å°‘è½æ‡‚äº†å¹¾å€‹æ¦‚å¿µ</span><span style="font-family:'MS Gothic'">ã€‚</span><span style="font-family:'Courier New'">' },</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">sleep_class: { label: '</span><span style="font-family:'Microsoft JhengHei'">èª²å ‚è£œçœ </span><span style="font-family:'Courier New'">', energy: 20, stress: -5, knowledge: -5, social: 0, money: 0, time: 2, msg: '</span><span style="font-family:'Microsoft JhengHei'">ä½ æŠŠæ›¸ç«‹èµ·ä¾†å·å·ç¡äº†ä¸€è¦º</span><span style="font-family:'Courier New'">ï¼Œ</span><span style="font-family:'Microsoft JhengHei'">ç²¾ç¥å¥½äº†</span><span style="font-family:'Courier New'">ï¼Œ</span><span style="font-family:'Microsoft JhengHei'">ä½†éŒ¯éäº†é‡é»</span><span style="font-family:'MS Gothic'">ã€‚</span><span style="font-family:'Courier New'">' },</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">social_group: { label: '</span><span style="font-family:'Microsoft JhengHei'">å°çµ„è¨è«–</span><span style="font-family:'Courier New'">', energy: -10, stress: 10, knowledge: 5, social: 10, money: 0, time: 2, npc: 'roommate', npcVal: 5, msg: '</span><span style="font-family:'Microsoft JhengHei'">ä½ å€‘åœ¨è¨è«–ä¸­æ‰¾åˆ°äº†å…±è­˜</span><span style="font-family:'Courier New'">ï¼Œ</span><span style="font-family:'Microsoft JhengHei'">å°çµ„é—œä¿‚æ›´å¥½äº†</span><span style="font-family:'MS Gothic'">ã€‚</span><span style="font-family:'Courier New'">' },</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">// </span><span style="font-family:'Microsoft JhengHei'">æ•™æˆè¾¦å…¬å®¤è¡Œå‹•</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">ask_prof_guidance: { label: '</span><span style="font-family:'Microsoft JhengHei'">è«‹æ•™æ•™æˆ</span><span style="font-family:'Courier New'">', energy: -10, stress: 15, knowledge: 20, social: 0, money: 0, time: 1, npc: 'prof', npcVal: 10, msg: '</span><span style="font-family:'Microsoft JhengHei'">é›–ç„¶æœ‰é»ç·Šå¼µ</span><span style="font-family:'Courier New'">ï¼Œ</span><span style="font-family:'Microsoft JhengHei'">ä½†æ•™æˆçµ¦ä½ æŒ‡é»è¿·æ´¥</span><span style="font-family:'Courier New'">ï¼Œ</span><span style="font-family:'Microsoft JhengHei'">çŸ¥è­˜å¤§å¢</span><span style="font-family:'Courier New'">ï¼' },</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">submit_assignment: { label: '</span><span style="font-family:'Microsoft JhengHei'">æäº¤åŠŸèª²</span><span style="font-family:'Courier New'">', energy: -5, stress: -25, knowledge: 5, social: 0, money: 0, time: 0, msg: '</span><span style="font-family:'Microsoft JhengHei'">æŠŠæ–‡ä»¶å¤¾æŠ•é€²äº†æ•™æˆçš„ä¿¡ç®±</span><span style="font-family:'Courier New'">ï¼Œ</span><span style="font-family:'Microsoft JhengHei'">å£“åŠ›ä¸€æƒè€Œç©º</span><span style="font-family:'Courier New'">ï¼' },</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">};</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">// --- Components ---</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">export default function CUHKSimsLife() {</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">// Game State</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">const [screen, setScreen] = useState('intro');</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">const [player, setPlayer] = useState({ name: '', faculty: 'arts', avatar: 'smug' });</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">const [stats, setStats] = useState({ energy: 100, stress: 0, knowledge: 0, social: 0, money: 0 });</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">const [relationships, setRelationships] = useState(INITIAL_RELATIONSHIPS);</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">const [time, setTime] = useState({ day: 1, hour: 9 });</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">const [location, setLocation] = useState('dorm');</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">const [logs, setLogs] = useState([]);</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">const [popup, setPopup] = useState(null);</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">const logsEndRef = useRef(null);</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">useEffect(() =&gt; {</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">logsEndRef.current?.scrollIntoView({ behavior: 'smooth' });</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">}, [logs]);</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">// Initial Money Randomizer</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">const generateMoney = (facultyId) =&gt; {</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">let base = Math.floor(Math.random() * 500) + 800;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">if (facultyId === 'ba') base += 800;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">if (facultyId === 'arts') base -= 100;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">return base;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">};</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">const startGame = () =&gt; {</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">const facultyData = FACULTIES.find(f =&gt; f.id === player.faculty);</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">setStats({</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:37.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">...facultyData.initStats,</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:37.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">money: generateMoney(player.faculty)</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">});</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">setLogs([`</span><span style="font-family:'Microsoft JhengHei'">æ­¡è¿ä¾†åˆ°</span><span style="font-family:'Courier New'"> CUHKï¼</span><span style="font-family:'Microsoft JhengHei'">ä½ æ˜¯</span><span style="font-family:'Courier New'">${facultyData.name}</span><span style="font-family:'Microsoft JhengHei'">çš„æ–°ç”Ÿ</span><span style="font-family:'MS Gothic'">ã€‚</span><span style="font-family:'Microsoft JhengHei'">å¥½å¥½è¦åŠƒä½ çš„å¤§å­¸ç”Ÿæ´»å§</span><span style="font-family:'Courier New'">ï¼`]);</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">setScreen('game');</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">};</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">// </span><span style="font-family:'Microsoft JhengHei'">é‡ç½®éŠæˆ²åŠŸèƒ½</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">const resetGame = () =&gt; {</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">setScreen('intro');</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">setPlayer({ name: '', faculty: 'arts', avatar: 'smug' });</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">setStats({ energy: 100, stress: 0, knowledge: 0, social: 0, money: 0 });</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">setRelationships(INITIAL_RELATIONSHIPS);</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">setTime({ day: 1, hour: 9 });</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">setLogs([]);</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">setLocation('dorm');</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">setPopup(null);</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">};</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">// Helper</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">const formatTime = (h) =&gt; {</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">const period = h &gt;= 12 ? 'PM' : 'AM';</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">const displayH = h &gt; 12 ? h - 12 : h;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">return `${displayH}:00 ${period}`;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">};</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">const addLog = (msg) =&gt; {</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">setLogs(prev =&gt; [...prev, `[D${time.day} ${formatTime(time.hour)}] ${msg}`]);</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">};</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">// Relationship Helper</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">const updateRelationship = (npcId, value) =&gt; {</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">if (!npcId) return;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">setRelationships(prev =&gt; prev.map(r =&gt; {</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:37.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">if (r.id === npcId) {</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:50.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">const newVal = Math.min(r.max, Math.max(0, r.level + value));</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:50.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">let changeMsg = '';</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:50.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">if (value &gt; 0) changeMsg = ` (${r.name} </span><span style="font-family:'Microsoft JhengHei'">å¥½æ„Ÿ</span><span style="font-family:'Courier New'"> +${value})`;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:50.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">else if (value &lt; 0) changeMsg = ` (${r.name} </span><span style="font-family:'Microsoft JhengHei'">å¥½æ„Ÿ</span><span style="font-family:'Courier New'"> ${value})`;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:50.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">if (changeMsg) addLog(changeMsg);</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:50.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">return { ...r, level: newVal };</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:37.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:37.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">return r;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">}));</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">};</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">const triggerRandomEvent = () =&gt; {</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">const chance = Math.random();</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">if (chance &gt; 0.35) return;</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">const events = [</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:37.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">{</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:50.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">title: '</span><span style="font-family:'Microsoft JhengHei'">çªç™¼</span><span style="font-family:'Courier New'"> Dem Beat!',</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:50.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">icon: &lt;Users size={32} /&gt;,</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:50.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">desc: '</span><span style="font-family:'Microsoft JhengHei'">è·¯éç™¾è¬å¤§é“</span><span style="font-family:'Courier New'">ï¼Œ</span><span style="font-family:'Microsoft JhengHei'">çªç„¶è¢«ä¸€ç­ç©¿è‘—ç³»</span><span style="font-family:'Courier New'">Tee</span><span style="font-family:'Microsoft JhengHei'">çš„äººåœä½å¤§å«å£è™Ÿ</span><span style="font-family:'Courier New'">ï¼',</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:50.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">choices: [</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:63pt; font-size:10.5pt"><span style="font-family:'Courier New'">{ text: '</span><span style="font-family:'Microsoft JhengHei'">ä¸€èµ·å«</span><span style="font-family:'Courier New'">ï¼', effect: { social: 15, stress: 5, energy: -10 }, msg: '</span><span style="font-family:'Microsoft JhengHei'">ä½ å¤§å«</span><span style="font-family:'MS Gothic'">ã€Œ</span><span style="font-family:'Microsoft JhengHei'">é»‘å¤§é»‘å¤§ä¸­å¤§</span><span style="font-family:'Courier New'">ï¼</span><span style="font-family:'MS Gothic'">ã€</span><span style="font-family:'Courier New'">ï¼Œ</span><span style="font-family:'Microsoft JhengHei'">é›–ç„¶å¾ˆç´¯ä½†å¾ˆçˆ½</span><span style="font-family:'MS Gothic'">ã€‚</span><span style="font-family:'Courier New'">' },</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:63pt; font-size:10.5pt"><span style="font-family:'Courier New'">{ text: '</span><span style="font-family:'Microsoft JhengHei'">å°·å°¬é€ƒè·‘</span><span style="font-family:'Courier New'">', effect: { social: -5, stress: 10 }, msg: '</span><span style="font-family:'Microsoft JhengHei'">ä½ ä½é ­å¿«é€Ÿèµ°é</span><span style="font-family:'Courier New'">ï¼Œ</span><span style="font-family:'Microsoft JhengHei'">è¦ºå¾—ç¤¾æç™¼ä½œ</span><span style="font-family:'MS Gothic'">ã€‚</span><span style="font-family:'Courier New'">' }</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:50.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">]</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:37.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">},</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:37.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">{</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:50.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">title: '</span><span style="font-family:'Microsoft JhengHei'">çŒ´å­æ¶åŠ«</span><span style="font-family:'Courier New'">',</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:50.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">icon: &lt;Ghost size={32} /&gt;,</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:50.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">desc: '</span><span style="font-family:'Microsoft JhengHei'">ä¸€éš»å…‡çŒ›çš„çŒ´å­ç›¯ä¸Šäº†ä½ æ‰‹ä¸­çš„ä¸‰æ–‡æ²»</span><span style="font-family:'Courier New'">ï¼',</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:50.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">choices: [</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:63pt; font-size:10.5pt"><span style="font-family:'Courier New'">{ text: '</span><span style="font-family:'Microsoft JhengHei'">æ£„é£Ÿä¿å‘½</span><span style="font-family:'Courier New'">', effect: { money: -20, energy: -10 }, msg: '</span><span style="font-family:'Microsoft JhengHei'">çŒ´å­æ‹¿èµ°äº†é£Ÿç‰©</span><span style="font-family:'Courier New'">ï¼Œ</span><span style="font-family:'Microsoft JhengHei'">ä½ é¤“è‘—è‚šå­é›¢é–‹äº†</span><span style="font-family:'MS Gothic'">ã€‚</span><span style="font-family:'Courier New'">' },</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:63pt; font-size:10.5pt"><span style="font-family:'Courier New'">{ text: '</span><span style="font-family:'Microsoft JhengHei'">èˆ‡çŒ´å­æ±ºé¬¥</span><span style="font-family:'Courier New'">', effect: { stress: 20, energy: -15 }, msg: '</span><span style="font-family:'Microsoft JhengHei'">ä½ æˆåŠŸåš‡é€€äº†çŒ´å­</span><span style="font-family:'Courier New'">ï¼Œ</span><span style="font-family:'Microsoft JhengHei'">ä½†å·®é»è¢«æŠ“å‚·</span><span style="font-family:'MS Gothic'">ã€‚</span><span style="font-family:'Courier New'">' }</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:50.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">]</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:37.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">},</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:37.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">{</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:50.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">title: '</span><span style="font-family:'Microsoft JhengHei'">æ ¡å·´æ»¿åº§</span><span style="font-family:'Courier New'">',</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:50.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">icon: &lt;Bus size={32} /&gt;,</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:50.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">desc: '</span><span style="font-family:'Microsoft JhengHei'">è½‰å ‚æ™‚é–“</span><span style="font-family:'Courier New'">ï¼Œ</span><span style="font-family:'Microsoft JhengHei'">æ ¡å·´ç«™æ’äº†é•·é•·çš„äººé¾</span><span style="font-family:'MS Gothic'">ã€‚</span><span style="font-family:'Courier New'">',</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:50.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">choices: [</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:63pt; font-size:10.5pt"><span style="font-family:'Courier New'">{ text: '</span><span style="font-family:'Microsoft JhengHei'">è¡Œè·¯ä¸Šå±±</span><span style="font-family:'Courier New'">', effect: { energy: -20, stress: 5 }, msg: '</span><span style="font-family:'Microsoft JhengHei'">ä½ çˆ¬å¡çˆ¬åˆ°æ‡·ç–‘äººç”Ÿ</span><span style="font-family:'Courier New'">ï¼Œ</span><span style="font-family:'Microsoft JhengHei'">é€™å°±æ˜¯</span><span style="font-family:'MS Gothic'">ã€Œ</span><span style="font-family:'Microsoft JhengHei'">ä¸­å¤§å±±åŸ</span><span style="font-family:'MS Gothic'">ã€</span><span style="font-family:'Courier New'">ï¼' },</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:63pt; font-size:10.5pt"><span style="font-family:'Courier New'">{ text: '</span><span style="font-family:'Microsoft JhengHei'">ç­‰ä¸‹ä¸€ç­</span><span style="font-family:'Courier New'">', effect: { time: 1, stress: -5 }, msg: '</span><span style="font-family:'Microsoft JhengHei'">ä½ æ±ºå®šæ…¢æ…¢ç­‰</span><span style="font-family:'Courier New'">ï¼Œ</span><span style="font-family:'Microsoft JhengHei'">é›–ç„¶é²åˆ°äº†</span><span style="font-family:'Courier New'">ï¼Œ</span><span style="font-family:'Microsoft JhengHei'">ä½†å¿ƒæƒ…å¹³éœ</span><span style="font-family:'MS Gothic'">ã€‚</span><span style="font-family:'Courier New'">' }</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:50.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">]</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:37.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">},</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:37.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">{</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:50.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">title: 'Add Drop </span><span style="font-family:'Microsoft JhengHei'">æˆ°çˆ­</span><span style="font-family:'Courier New'">',</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:50.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">icon: &lt;Activity size={32} /&gt;,</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:50.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">desc: '</span><span style="font-family:'Microsoft JhengHei'">ä»Šå¤©æ˜¯</span><span style="font-family:'Courier New'"> Add Drop </span><span style="font-family:'Microsoft JhengHei'">æœ€å¾Œä¸€å¤©</span><span style="font-family:'Courier New'">ï¼Œ</span><span style="font-family:'Microsoft JhengHei'">ç³»çµ±éå¸¸å¡</span><span style="font-family:'Courier New'">ï¼',</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:50.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">choices: [</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:63pt; font-size:10.5pt"><span style="font-family:'Courier New'">{ text: '</span><span style="font-family:'Microsoft JhengHei'">ç˜‹ç‹‚</span><span style="font-family:'Courier New'"> F5', effect: { stress: 15, knowledge: 5 }, msg: '</span><span style="font-family:'Microsoft JhengHei'">ä½ çµ‚æ–¼æ¶åˆ°äº†å¿ƒå„€çš„é€šè­˜èª²</span><span style="font-family:'Courier New'"> (GE)ï¼' },</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:63pt; font-size:10.5pt"><span style="font-family:'Courier New'">{ text: '</span><span style="font-family:'Microsoft JhengHei'">éš¨ç·£å§</span><span style="font-family:'Courier New'">', effect: { stress: -5 }, msg: '</span><span style="font-family:'Microsoft JhengHei'">ä½ æ”¾æ£„äº†æ™æ‰</span><span style="font-family:'Courier New'">ï¼Œ</span><span style="font-family:'Microsoft JhengHei'">é¸äº†å‰©ä¸‹çš„èª²</span><span style="font-family:'MS Gothic'">ã€‚</span><span style="font-family:'Courier New'">' }</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:50.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">]</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:37.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">];</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">const randomEvent = events[Math.floor(Math.random() * events.length)];</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">setPopup(randomEvent);</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">};</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">const handleAction = (actionKey) =&gt; {</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">const action = ACTIONS_DB[actionKey];</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">// 1. </span><span style="font-family:'Microsoft JhengHei'">æª¢æŸ¥é‡‘éŒ¢</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">if (stats.money + action.money &lt; 0) {</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:37.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">addLog('</span><span style="font-family:'Microsoft JhengHei'">ä½ çš„éŒ¢ä¸å¤ äº†</span><span style="font-family:'Courier New'">ï¼</span><span style="font-family:'Microsoft JhengHei'">é€™å°±æ˜¯è²§çª®å¤§å­¸ç”Ÿçš„æ‚²å“€</span><span style="font-family:'Courier New'">...');</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:37.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">return;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">}</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">// 2. </span><span style="font-family:'Microsoft JhengHei'">æª¢æŸ¥é«”åŠ›ä¸¦åˆ¤æ–·æ˜¯å¦</span><span style="font-family:'Courier New'"> Game Over</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">const newEnergy = stats.energy + action.energy;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">if (newEnergy &lt;= 0) {</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:37.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">// </span><span style="font-family:'Microsoft JhengHei'">ä»ç„¶æ‡‰ç”¨å…¶ä»–ç‹€æ…‹çš„è®ŠåŒ–</span><span style="font-family:'Courier New'">ï¼Œ</span><span style="font-family:'Microsoft JhengHei'">ä½†é«”åŠ›æ­¸é›¶æˆ–è² æ•¸</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:37.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">setStats(prev =&gt; ({</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:63pt; font-size:10.5pt"><span style="font-family:'Courier New'">energy: Math.min(120, Math.max(0, newEnergy)),</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:63pt; font-size:10.5pt"><span style="font-family:'Courier New'">stress: Math.max(0, prev.stress + action.stress),</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:63pt; font-size:10.5pt"><span style="font-family:'Courier New'">knowledge: Math.min(100, prev.knowledge + action.knowledge),</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:63pt; font-size:10.5pt"><span style="font-family:'Courier New'">social: Math.min(100, prev.social + action.social),</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:63pt; font-size:10.5pt"><span style="font-family:'Courier New'">money: prev.money + action.money</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:37.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">}));</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:37.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">addLog(`ğŸš¨ </span><span style="font-family:'Microsoft JhengHei'">é«”åŠ›å®Œå…¨é€æ”¯</span><span style="font-family:'Courier New'"> (${action.energy &gt; 0 ? '+' : ''}${action.energy})ï¼Œ</span><span style="font-family:'Microsoft JhengHei'">ä½ å€’ä¸‹äº†</span><span style="font-family:'Courier New'">ï¼`);</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:37.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">setScreen('gameover');</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:37.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">return;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">}</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">// 3. </span><span style="font-family:'Microsoft JhengHei'">æ‡‰ç”¨æ‰€æœ‰ç‹€æ…‹çš„è®ŠåŒ–</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">setStats(prev =&gt; ({</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:37.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">energy: Math.min(120, Math.max(0, newEnergy)),</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:37.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">stress: Math.max(0, prev.stress + action.stress),</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:37.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">knowledge: Math.min(100, prev.knowledge + action.knowledge),</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:37.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">social: Math.min(100, prev.social + action.social),</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:37.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">money: prev.money + action.money</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">}));</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">if (action.npc) {</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:37.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">updateRelationship(action.npc, action.npcVal);</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">}</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">let newHour = time.hour + action.time;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">let newDay = time.day;</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">addLog(action.msg);</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">// </span><span style="font-family:'Microsoft JhengHei'">è™•ç†æ™‚é–“è·³è½‰</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">if (newHour &gt;= 24) {</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:37.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">newHour = 9;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:37.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">newDay += 1;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:37.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">addLog('=== </span><span style="font-family:'Microsoft JhengHei'">ç†¬å¤œä¸å¥½å–”</span><span style="font-family:'Courier New'">ï¼Œ</span><span style="font-family:'Microsoft JhengHei'">æ–°çš„ä¸€å¤©é–‹å§‹</span><span style="font-family:'Courier New'">ï¼ ===');</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:37.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">// </span><span style="font-family:'Microsoft JhengHei'">è¼•å¾®æ¢å¾©é«”åŠ›å’Œæ¸›å£“</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:37.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">setStats(prev =&gt; ({ ...prev, energy: Math.min(120, prev.energy + 40), stress: Math.max(0, prev.stress - 15) }));</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">}</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">setTime({ day: newDay, hour: newHour });</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">triggerRandomEvent();</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">};</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">const handleMove = (locId) =&gt; {</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">if (locId === location) return;</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">const costEnergy = 5;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">const costTime = 1;</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">if (stats.energy &lt; costEnergy) {</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:37.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">addLog('</span><span style="font-family:'Microsoft JhengHei'">å¤ªç´¯äº†</span><span style="font-family:'Courier New'">ï¼Œ</span><span style="font-family:'Microsoft JhengHei'">èµ°ä¸å‹•</span><span style="font-family:'Courier New'">ï¼Œ</span><span style="font-family:'Microsoft JhengHei'">ç§»å‹•å¤±æ•—</span><span style="font-family:'Courier New'">...');</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:37.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">return;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">}</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">setStats(prev =&gt; ({ ...prev, energy: prev.energy - costEnergy }));</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">let newHour = time.hour + costTime;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">let newDay = time.day;</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">if (newHour &gt;= 24) {</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:50.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">newHour = 9;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:50.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">newDay += 1;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:50.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">addLog('</span><span style="font-family:'Microsoft JhengHei'">è¡Œè·¯è¡Œåˆ°å¤©å…‰</span><span style="font-family:'Courier New'">... (</span><span style="font-family:'Microsoft JhengHei'">é«”åŠ›æ¢å¾©å°‘è¨±</span><span style="font-family:'Courier New'">)');</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:50.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">setStats(prev =&gt; ({ ...prev, energy: prev.energy + 20 }));</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">}</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">setTime({ day: newDay, hour: newHour });</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">setLocation(locId);</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">addLog(`</span><span style="font-family:'Microsoft JhengHei'">ç§»å‹•åˆ°äº†</span><span style="font-family:'Courier New'"> ${LOCATIONS.find(l =&gt; l.id === locId).name}</span><span style="font-family:'MS Gothic'">ã€‚</span><span style="font-family:'Courier New'">`);</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">triggerRandomEvent();</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">};</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">const handleEventChoice = (choice) =&gt; {</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">// </span><span style="font-family:'Microsoft JhengHei'">æª¢æŸ¥äº‹ä»¶é¸æ“‡æœƒå¦å°è‡´</span><span style="font-family:'Courier New'"> Game Over</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">const newEnergy = stats.energy + (choice.effect.energy || 0);</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">if (newEnergy &lt;= 0) {</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:37.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">// </span><span style="font-family:'Microsoft JhengHei'">é«”åŠ›é€æ”¯</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:44.1pt; font-size:10.5pt"><span style="font-family:'Courier New'">setStats(prev =&gt; ({</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:63pt; font-size:10.5pt"><span style="font-family:'Courier New'">energy: 0,</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:63pt; font-size:10.5pt"><span style="font-family:'Courier New'">stress: prev.stress + (choice.effect.stress || 0),</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:63pt; font-size:10.5pt"><span style="font-family:'Courier New'">knowledge: prev.knowledge + (choice.effect.knowledge || 0),</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:63pt; font-size:10.5pt"><span style="font-family:'Courier New'">social: prev.social + (choice.effect.social || 0),</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:63pt; font-size:10.5pt"><span style="font-family:'Courier New'">money: prev.money + (choice.effect.money || 0)</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:37.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">}));</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:37.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">addLog(`ğŸš¨ </span><span style="font-family:'Microsoft JhengHei'">äº‹ä»¶çµæœå°è‡´é«”åŠ›é€æ”¯</span><span style="font-family:'Courier New'">ï¼Œ</span><span style="font-family:'Microsoft JhengHei'">éŠæˆ²çµæŸ</span><span style="font-family:'Courier New'">ï¼`);</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:37.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">setPopup(null);</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:37.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">setScreen('gameover');</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:37.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">return;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">}</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">setStats(prev =&gt; ({</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:37.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">energy: Math.min(120, Math.max(0, newEnergy)),</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:37.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">stress: prev.stress + (choice.effect.stress || 0),</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:37.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">knowledge: prev.knowledge + (choice.effect.knowledge || 0),</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:37.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">social: prev.social + (choice.effect.social || 0),</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:37.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">money: prev.money + (choice.effect.money || 0),</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">}));</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">if (choice.effect.time) {</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:50.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">let newHour = time.hour + choice.effect.time;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:56.7pt; font-size:10.5pt"><span style="font-family:'Courier New'">if (newHour &gt;= 24) {</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:75.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">newHour = 9;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:75.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">setTime(prev =&gt; ({ day: prev.day + 1, hour: newHour }));</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:50.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">} else {</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:75.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">setTime(prev =&gt; ({ ...prev, hour: newHour }));</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:50.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">}</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">addLog(choice.msg);</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">setPopup(null);</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">};</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">// --- Screens ---</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">// 1. Intro Screen</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">if (screen === 'intro') {</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">return (</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:37.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div className="min-h-screen bg-indigo-900 flex flex-col items-center justify-center text-white p-6 font-sans relative overflow-hidden"&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:50.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div className="absolute top-10 right-10 opacity-20"&gt;&lt;Building size={120} /&gt;&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:50.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div className="absolute bottom-10 left-10 opacity-20"&gt;&lt;GraduationCap size={120} /&gt;&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:50.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div className="bg-white/10 backdrop-blur-md p-8 rounded-3xl shadow-2xl border border-white/20 text-center max-w-lg animate-fade-in-up"&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:63pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div className="flex justify-center mb-4 text-yellow-300"&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:81.9pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;GraduationCap size={64} className="animate-bounce" /&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:63pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:63pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;h1 className="text-5xl font-black mb-2 tracking-tight text-transparent bg-clip-text bg-gradient-to-r from-yellow-300 to-pink-300"&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:75.6pt; font-size:10.5pt"><span style="font-family:'Microsoft JhengHei'">ä¸­å¤§æ¨¡æ“¬äººç”Ÿ</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:63pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/h1&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:63pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;h2 className="text-2xl font-bold text-indigo-200 mb-6"&gt;</span><span style="font-family:'Microsoft JhengHei'">å¤§å­¸ç”Ÿæ´»é«”é©—ç‰ˆ</span><span style="font-family:'Courier New'">&lt;/h2&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:63pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;p className="text-indigo-100 mb-8 leading-relaxed"&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:75.6pt; font-size:10.5pt"><span style="font-family:'Microsoft JhengHei'">æ­¡è¿ä¾†åˆ°å±±åŸ</span><span style="font-family:'Courier New'">ï¼</span><span style="font-family:'Microsoft JhengHei'">åŒ–èº«ç‚ºå¤§å­¸ç”Ÿ</span><span style="font-family:'Courier New'">ï¼Œ</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:75.6pt; font-size:10.5pt"><span style="font-family:'Microsoft JhengHei'">åœ¨ç™¾è¬å¤§é“æ‰“å¡</span><span style="font-family:'Courier New'">ï¼Œ</span><span style="font-family:'Microsoft JhengHei'">åœ¨åœ–æ›¸é¤¨è¶•</span><span style="font-family:'Courier New'"> Dueï¼Œ</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:75.6pt; font-size:10.5pt"><span style="font-family:'Microsoft JhengHei'">é‚„è¦å°å¿ƒä¸è¦è¢«çŒ´å­æ¶èµ°åˆé¤</span><span style="font-family:'Courier New'">ï¼</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:63pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/p&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:63pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;button</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:75.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">onClick={() =&gt; setScreen('create')}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:75.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">className="w-full bg-gradient-to-r from-yellow-400 to-orange-500 hover:from-yellow-500 hover:to-orange-600 text-white font-black py-4 px-8 rounded-2xl shadow-lg transition transform hover:scale-105 hover:shadow-xl flex items-center justify-center gap-2"</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:63pt; font-size:10.5pt"><span style="font-family:'Courier New'">&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:75.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;Smile size={24} /&gt; </span><span style="font-family:'Microsoft JhengHei'">é–‹å§‹å…¥å­¸</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:63pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/button&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:50.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:37.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">);</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">}</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">// 2. Character Creation</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">if (screen === 'create') {</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">return (</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:37.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div className="min-h-screen bg-indigo-50 flex items-center justify-center p-4 font-sans"&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:50.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div className="bg-white p-6 md:p-8 rounded-3xl shadow-xl w-full max-w-4xl flex flex-col md:flex-row gap-8"&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:63pt; font-size:10.5pt"><span style="font-family:'Courier New'">{/* Left: Input &amp; Avatar */}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:63pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div className="flex-1 space-y-6"&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:75.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;h2 className="text-3xl font-black text-indigo-900"&gt;</span><span style="font-family:'Microsoft JhengHei'">å…¥å­¸è¨»å†Š</span><span style="font-family:'Courier New'"> ğŸ“&lt;/h2&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:75.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:88.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;label className="block text-gray-700 font-bold mb-2"&gt;</span><span style="font-family:'Microsoft JhengHei'">ä½ çš„åå­—</span><span style="font-family:'Courier New'">&lt;/label&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:88.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;input</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:100.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">type="text"</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:100.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">className="w-full bg-gray-50 border-2 border-gray-200 p-3 rounded-xl focus:border-indigo-500 focus:ring-4 focus:ring-indigo-100 outline-none transition text-lg"</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:100.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">value={player.name}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:100.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">onChange={(e) =&gt; setPlayer({...player, name: e.target.value})}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:100.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">placeholder="</span><span style="font-family:'Microsoft JhengHei'">è¼¸å…¥åå­—</span><span style="font-family:'Courier New'">"</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:88.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">/&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:75.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:75.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:88.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;label className="block text-gray-700 font-bold mb-3"&gt;</span><span style="font-family:'Microsoft JhengHei'">é¸æ“‡ä½ çš„å¿ƒæƒ…é ­åƒ</span><span style="font-family:'Courier New'">&lt;/label&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:88.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div className="grid grid-cols-4 gap-2"&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:100.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">{AVATARS.map(avatar =&gt; (</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:113.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;button</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:126pt; font-size:10.5pt"><span style="font-family:'Courier New'">key={avatar.id}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:126pt; font-size:10.5pt"><span style="font-family:'Courier New'">onClick={() =&gt; setPlayer({...player, avatar: avatar.id})}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:126pt; font-size:10.5pt"><span style="font-family:'Courier New'">className={`aspect-square rounded-2xl border-2 flex flex-col items-center justify-center transition relative overflow-hidden ${</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:138.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">player.avatar === avatar.id</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:151.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">? 'border-indigo-500 bg-indigo-50 shadow-inner'</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:151.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">: 'border-gray-200 hover:border-indigo-300 hover:bg-white'</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:126pt; font-size:10.5pt"><span style="font-family:'Courier New'">}`}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:113.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:126pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;span className="text-3xl mb-1"&gt;{avatar.icon}&lt;/span&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:126pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;span className="text-[10px] font-bold text-gray-600 text-center leading-tight px-1"&gt;{avatar.name}&lt;/span&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:126pt; font-size:10.5pt"><span style="font-family:'Courier New'">{player.avatar === avatar.id &amp;&amp; (</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:151.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div className="absolute top-1 right-1 w-2 h-2 bg-indigo-500 rounded-full"&gt;&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:126pt; font-size:10.5pt"><span style="font-family:'Courier New'">)}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:113.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/button&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:100.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">))}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:88.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:88.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;p className="text-xs text-gray-500 mt-2 text-center bg-gray-100 p-2 rounded-lg"&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:100.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">{AVATARS.find(a =&gt; a.id === player.avatar)?.desc}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:88.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/p&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:75.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:63pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:63pt; font-size:10.5pt"><span style="font-family:'Courier New'">{/* Right: Faculty Selection */}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:63pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div className="flex-1 flex flex-col"&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:75.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;label className="block text-gray-700 font-bold mb-3"&gt;</span><span style="font-family:'Microsoft JhengHei'">é¸æ“‡å­¸é™¢</span><span style="font-family:'Courier New'">&lt;/label&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:75.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div className="grid grid-cols-1 gap-2 overflow-y-auto max-h-[400px] pr-2 custom-scrollbar flex-1"&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:88.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">{FACULTIES.map(f =&gt; (</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:100.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;button</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:113.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">key={f.id}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:113.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">onClick={() =&gt; setPlayer({...player, faculty: f.id})}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:113.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">className={`p-4 rounded-xl border-2 text-left transition flex items-start gap-3 ${</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:126pt; font-size:10.5pt"><span style="font-family:'Courier New'">player.faculty === f.id</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:138.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">? 'border-indigo-500 bg-indigo-50'</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:138.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">: 'border-gray-100 hover:border-indigo-200 bg-white'</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:113.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">}`}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:100.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:113.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div className={`w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 ${player.faculty === f.id ? 'bg-indigo-200 text-indigo-700' : 'bg-gray-100 text-gray-400'}`}&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:126pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;GraduationCap size={20} /&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:113.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:113.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:126pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div className="font-bold text-gray-800 text-lg"&gt;{f.name}&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:126pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div className="text-xs text-gray-500 font-medium"&gt;{f.description}&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:113.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:100.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/button&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:88.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">))}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:75.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:75.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;button</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:88.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">disabled={!player.name}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:88.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">onClick={startGame}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:88.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">className={`mt-6 w-full font-bold py-4 rounded-2xl shadow-lg transition transform active:scale-95 ${</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:100.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">player.name</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:113.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">? 'bg-indigo-600 text-white hover:bg-indigo-700 hover:shadow-xl'</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:113.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">: 'bg-gray-300 text-gray-500 cursor-not-allowed'</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:88.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">}`}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:75.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:88.2pt; font-size:10.5pt"><span style="font-family:'Microsoft JhengHei'">ç¢ºèªå…¥å­¸</span><span style="font-family:'Courier New'"> â†’</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:75.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/button&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:63pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:50.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:37.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">);</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">}</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">// 3. Game Over Screen</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">if (screen === 'gameover') {</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">return (</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:37.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div className="min-h-screen bg-gray-900 flex flex-col items-center justify-center text-white p-6 font-sans"&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:50.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div className="bg-gray-800 p-8 rounded-3xl shadow-2xl max-w-md w-full text-center border border-gray-700"&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:75.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div className="mb-6 animate-pulse"&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:100.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;span className="text-6xl"&gt;ğŸ’€&lt;/span&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:75.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:75.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;h1 className="text-3xl font-black mb-2 text-red-400"&gt;</span><span style="font-family:'Microsoft JhengHei'">é«”åŠ›é€æ”¯</span><span style="font-family:'Courier New'"> (Game Over)&lt;/h1&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:75.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;p className="text-gray-300 mb-8"&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:75.6pt; font-size:10.5pt"><span style="font-family:'Microsoft JhengHei'">ä½ åœ¨å›å®¿èˆçš„æ–œå¡ä¸Šå€’ä¸‹äº†</span><span style="font-family:'Courier New'">...&lt;br/&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:75.6pt; font-size:10.5pt"><span style="font-family:'Microsoft JhengHei'">è¢«å¥½å¿ƒçš„å®¿å‹æŠ¬é€²äº†æ•‘è­·è»Š</span><span style="font-family:'MS Gothic'">ã€‚</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:75.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/p&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:75.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div className="bg-gray-900/50 p-4 rounded-2xl mb-8 text-left space-y-2"&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:75.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;h3 className="font-bold text-gray-400 text-xs uppercase tracking-wider mb-2"&gt;</span><span style="font-family:'Microsoft JhengHei'">ä½ çš„æˆç¸¾å–®</span><span style="font-family:'Courier New'">&lt;/h3&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:75.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div className="flex justify-between"&gt;&lt;span&gt;</span><span style="font-family:'Microsoft JhengHei'">å­˜æ´»å¤©æ•¸</span><span style="font-family:'Courier New'">&lt;/span&gt; &lt;span className="font-mono text-yellow-400"&gt;{time.day} </span><span style="font-family:'Microsoft JhengHei'">å¤©</span><span style="font-family:'Courier New'">&lt;/span&gt;&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:75.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div className="flex justify-between"&gt;&lt;span&gt;</span><span style="font-family:'Microsoft JhengHei'">çŸ¥è­˜ç©ç´¯</span><span style="font-family:'Courier New'">&lt;/span&gt; &lt;span className="font-mono text-blue-400"&gt;{stats.knowledge}&lt;/span&gt;&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:75.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div className="flex justify-between"&gt;&lt;span&gt;</span><span style="font-family:'Microsoft JhengHei'">ç¤¾äº¤æŒ‡æ•¸</span><span style="font-family:'Courier New'">&lt;/span&gt; &lt;span className="font-mono text-pink-400"&gt;{stats.social}&lt;/span&gt;&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:75.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div className="flex justify-between"&gt;&lt;span&gt;</span><span style="font-family:'Microsoft JhengHei'">å‰©é¤˜ç§æˆ¿éŒ¢</span><span style="font-family:'Courier New'">&lt;/span&gt; &lt;span className="font-mono text-green-400"&gt;${stats.money}&lt;/span&gt;&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:75.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:75.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;button</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:75.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">onClick={resetGame}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:75.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">className="w-full bg-white text-gray-900 font-bold py-3 px-8 rounded-xl hover:bg-gray-200 transition"</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:75.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:75.6pt; font-size:10.5pt"><span style="font-family:'Microsoft JhengHei'">é‡æ–°é–‹å§‹</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:75.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/button&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:50.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:37.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">);</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">}</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">// 4. Main Game Loop</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">const currentLocData = LOCATIONS.find(l =&gt; l.id === location);</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">const currentAvatar = AVATARS.find(a =&gt; a.id === player.avatar);</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">return (</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div className="min-h-screen bg-indigo-50 flex flex-col font-sans text-slate-800"&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:37.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">{/* Top Bar */}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:37.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div className="bg-white/80 backdrop-blur-md shadow-sm p-3 sticky top-0 z-20 border-b border-indigo-100"&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:50.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div className="max-w-6xl mx-auto flex flex-col md:flex-row gap-4 items-center justify-between"&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:63pt; font-size:10.5pt"><span style="font-family:'Courier New'">{/* Player Info */}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:63pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div className="flex items-center justify-between w-full md:w-auto gap-4"&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:88.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div className="flex items-center gap-3 bg-indigo-50 px-4 py-2 rounded-full"&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:100.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;span className="text-2xl bg-white rounded-full p-1 shadow-sm" role="img" aria-label="avatar"&gt;{currentAvatar?.icon}&lt;/span&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:100.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:113.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div className="font-bold text-indigo-900 leading-none"&gt;{player.name}&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:113.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div className="text-[10px] text-indigo-500 font-bold mt-1 uppercase tracking-wide"&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:126pt; font-size:10.5pt"><span style="font-family:'Courier New'">{FACULTIES.find(f =&gt; f.id === player.faculty).name} YEAR 1</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:113.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:100.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:88.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:88.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">{/* Reset Button (Mobile/Desktop) */}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:88.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;button</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:100.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">onClick={resetGame}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:100.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">className="md:hidden p-2 text-gray-500 hover:text-red-500 bg-gray-100 rounded-full"</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:100.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">title="</span><span style="font-family:'Microsoft JhengHei'">é‡æ–°é–‹å§‹</span><span style="font-family:'Courier New'">"</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:88.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:100.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;RotateCcw size={18} /&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:88.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/button&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:63pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:63pt; font-size:10.5pt"><span style="font-family:'Courier New'">{/* Stats Grid */}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:63pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div className="flex-1 grid grid-cols-4 gap-2 w-full"&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:75.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;StatBar icon={&lt;Activity size={14} /&gt;} label="</span><span style="font-family:'Microsoft JhengHei'">é«”åŠ›</span><span style="font-family:'Courier New'">" value={stats.energy} color="bg-rose-500" track="bg-rose-100" max={120} /&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:75.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;StatBar icon={&lt;Frown size={14} /&gt;} label="</span><span style="font-family:'Microsoft JhengHei'">å£“åŠ›</span><span style="font-family:'Courier New'">" value={stats.stress} color="bg-slate-600" track="bg-slate-200" isBad max={100} /&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:75.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;StatBar icon={&lt;BookOpen size={14} /&gt;} label="</span><span style="font-family:'Microsoft JhengHei'">çŸ¥è­˜</span><span style="font-family:'Courier New'">" value={stats.knowledge} color="bg-sky-500" track="bg-sky-100" max={100} /&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:75.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;StatBar icon={&lt;Users size={14} /&gt;} label="</span><span style="font-family:'Microsoft JhengHei'">ç¤¾äº¤</span><span style="font-family:'Courier New'">" value={stats.social} color="bg-amber-500" track="bg-amber-100" max={100} /&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:63pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:63pt; font-size:10.5pt"><span style="font-family:'Courier New'">{/* Time &amp; Money &amp; Reset */}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:63pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div className="flex items-center gap-3 text-sm font-bold w-full md:w-auto justify-end"&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:81.9pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div className="flex items-center text-indigo-600 bg-indigo-50 px-3 py-1 rounded-lg"&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:100.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;Clock size={16} className="mr-2" /&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:100.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">D{time.day} {formatTime(time.hour)}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:75.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:75.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div className="flex items-center text-emerald-600 bg-emerald-50 px-3 py-1 rounded-lg"&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:100.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;DollarSign size={16} className="mr-1" /&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:100.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">{stats.money}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:75.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:81.9pt; font-size:10.5pt"><span style="font-family:'Courier New'">{/* Reset Button (Desktop) */}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:81.9pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;button</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:100.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">onClick={resetGame}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:100.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">className="hidden md:flex items-center gap-1 px-3 py-1 text-xs text-gray-500 hover:text-red-500 hover:bg-red-50 rounded-lg transition"</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:100.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">title="</span><span style="font-family:'Microsoft JhengHei'">é‡æ–°é–‹å§‹</span><span style="font-family:'Courier New'">"</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:88.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:100.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;RotateCcw size={14} /&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:100.8pt; font-size:10.5pt"><span style="font-family:'Microsoft JhengHei'">é‡æ–°é–‹å§‹</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:88.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/button&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:63pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:50.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:37.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:37.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div className="flex-1 max-w-6xl mx-auto w-full p-4 grid grid-cols-1 lg:grid-cols-12 gap-6"&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:50.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">{/* Left Column: Navigation &amp; Relationships (3 cols) */}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:50.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div className="lg:col-span-3 space-y-4 flex flex-col"&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:75.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">{/* Minimap */}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:75.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div className="bg-white p-4 rounded-3xl shadow-sm border border-indigo-50"&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:100.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;h3 className="font-black text-gray-400 text-xs uppercase mb-3 flex items-center tracking-wider"&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:126pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;MapPin size={14} className="mr-1"/&gt; </span><span style="font-family:'Microsoft JhengHei'">åœ°åœ–å°èˆª</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:100.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/h3&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:100.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div className="space-y-2"&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:126pt; font-size:10.5pt"><span style="font-family:'Courier New'">{LOCATIONS.map(loc =&gt; (</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:151.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;button</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:176.45pt; font-size:10.5pt"><span style="font-family:'Courier New'">key={loc.id}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:176.45pt; font-size:10.5pt"><span style="font-family:'Courier New'">disabled={location === loc.id}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:176.45pt; font-size:10.5pt"><span style="font-family:'Courier New'">onClick={() =&gt; handleMove(loc.id)}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:176.45pt; font-size:10.5pt"><span style="font-family:'Courier New'">className={`w-full text-sm py-3 px-4 rounded-xl text-left transition flex items-center justify-between font-bold ${</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:201.65pt; font-size:10.5pt"><span style="font-family:'Courier New'">location === loc.id</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:201.65pt; font-size:10.5pt"><span style="font-family:'Courier New'">? 'bg-indigo-600 text-white shadow-lg shadow-indigo-200 transform scale-105'</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:201.65pt; font-size:10.5pt"><span style="font-family:'Courier New'">: 'bg-gray-50 hover:bg-white hover:shadow-md text-gray-600'</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:176.45pt; font-size:10.5pt"><span style="font-family:'Courier New'">}`}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:151.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:176.45pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;span&gt;{loc.name}&lt;/span&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:176.45pt; font-size:10.5pt"><span style="font-family:'Courier New'">{location === loc.id &amp;&amp; &lt;div className="w-2 h-2 bg-white rounded-full animate-pulse"&gt;&lt;/div&gt;}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:151.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/button&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:126pt; font-size:10.5pt"><span style="font-family:'Courier New'">))}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:100.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:75.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:75.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">{/* Relationships Panel */}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:75.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div className="bg-white p-4 rounded-3xl shadow-sm border border-indigo-50 flex-1"&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:100.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;h3 className="font-black text-gray-400 text-xs uppercase mb-3 flex items-center tracking-wider"&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:126pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;HeartHandshake size={14} className="mr-1"/&gt; </span><span style="font-family:'Microsoft JhengHei'">äººéš›é—œä¿‚</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:100.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/h3&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:100.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div className="space-y-4"&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:126pt; font-size:10.5pt"><span style="font-family:'Courier New'">{relationships.map(npc =&gt; (</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:151.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div key={npc.id} className="group"&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:176.45pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div className="flex justify-between items-end mb-1"&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:201.65pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;span className="text-sm font-bold text-gray-700"&gt;{npc.name}&lt;/span&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:201.65pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;span className="text-xs text-gray-400"&gt;{npc.level}/100&lt;/span&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:176.45pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:176.45pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div className="w-full bg-gray-100 rounded-full h-2 mb-1 overflow-hidden"&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:201.65pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:226.85pt; font-size:10.5pt"><span style="font-family:'Courier New'">className={`h-full rounded-full transition-all duration-700 ${</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:252.05pt; font-size:10.5pt"><span style="font-family:'Courier New'">npc.level &gt; 80 ? 'bg-pink-500' :</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:252.05pt; font-size:10.5pt"><span style="font-family:'Courier New'">npc.level &gt; 50 ? 'bg-indigo-400' : 'bg-gray-400'</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:226.85pt; font-size:10.5pt"><span style="font-family:'Courier New'">}`}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:226.85pt; font-size:10.5pt"><span style="font-family:'Courier New'">style={{ width: `${npc.level}%` }}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:201.65pt; font-size:10.5pt"><span style="font-family:'Courier New'">&gt;&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:176.45pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:176.45pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;p className="text-[10px] text-gray-400 group-hover:text-indigo-500 transition-colors truncate"&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:201.65pt; font-size:10.5pt"><span style="font-family:'Courier New'">{npc.desc}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:176.45pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/p&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:151.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:126pt; font-size:10.5pt"><span style="font-family:'Courier New'">))}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:100.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:75.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:50.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:50.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">{/* Center Column: Main Action Area (6 cols) */}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:50.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div className="lg:col-span-6 flex flex-col"&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:75.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div className="bg-white rounded-3xl shadow-xl overflow-hidden min-h-[500px] flex flex-col border-4 border-white ring-4 ring-indigo-50 transition-all"&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:100.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">{/* Header */}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:100.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div className={`${currentLocData.color} p-8 text-indigo-900 relative overflow-hidden`}&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:126pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div className="relative z-10"&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:151.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;h2 className="text-3xl font-black flex items-center mb-2"&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:176.45pt; font-size:10.5pt"><span style="font-family:'Courier New'">{currentLocData.name}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:151.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/h2&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:151.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;p className="text-indigo-800/70 font-medium"&gt;{currentLocData.description}&lt;/p&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:126pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:126pt; font-size:10.5pt"><span style="font-family:'Courier New'">{/* Decorative Circles */}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:126pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div className="absolute top-0 right-0 -mt-10 -mr-10 w-40 h-40 bg-white/20 rounded-full blur-2xl"&gt;&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:126pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div className="absolute bottom-0 left-0 -mb-10 -ml-10 w-24 h-24 bg-white/30 rounded-full blur-xl"&gt;&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:100.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:100.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">{/* Content */}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:100.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div className="p-6 flex-1 bg-white relative"&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:126pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;h3 className="font-bold text-gray-400 text-xs uppercase mb-4 tracking-wider"&gt;</span><span style="font-family:'Microsoft JhengHei'">å¯åŸ·è¡Œè¡Œå‹•</span><span style="font-family:'Courier New'">&lt;/h3&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:126pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div className="grid grid-cols-1 sm:grid-cols-2 gap-4"&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:151.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">{currentLocData.actions.map(actionKey =&gt; {</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:176.45pt; font-size:10.5pt"><span style="font-family:'Courier New'">const action = ACTIONS_DB[actionKey];</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:176.45pt; font-size:10.5pt"><span style="font-family:'Courier New'">return (</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:201.65pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;button</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:226.85pt; font-size:10.5pt"><span style="font-family:'Courier New'">key={actionKey}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:226.85pt; font-size:10.5pt"><span style="font-family:'Courier New'">onClick={() =&gt; handleAction(actionKey)}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:226.85pt; font-size:10.5pt"><span style="font-family:'Courier New'">className="bg-gray-50 p-5 rounded-2xl border-2 border-transparent hover:border-indigo-500 hover:bg-white hover:shadow-xl transition-all duration-300 flex flex-col items-start text-left group"</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:201.65pt; font-size:10.5pt"><span style="font-family:'Courier New'">&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:226.85pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;span className="font-bold text-lg text-gray-800 group-hover:text-indigo-600 mb-2 w-full border-b border-gray-200 pb-2 group-hover:border-indigo-100"&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:252.05pt; font-size:10.5pt"><span style="font-family:'Courier New'">{action.label}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:226.85pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/span&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:226.85pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div className="w-full space-y-2"&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:239.45pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div className="flex flex-wrap gap-2 text-xs font-medium"&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:264.65pt; font-size:10.5pt"><span style="font-family:'Courier New'">{action.energy !== 0 &amp;&amp; &lt;span className={`px-2 py-1 rounded-md ${action.energy &lt; 0 ? 'bg-red-100 text-red-600' : 'bg-green-100 text-green-600'}`}&gt;âš¡ {action.energy}&lt;/span&gt;}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:264.65pt; font-size:10.5pt"><span style="font-family:'Courier New'">{action.stress !== 0 &amp;&amp; &lt;span className={`px-2 py-1 rounded-md ${action.stress &gt; 0 ? 'bg-gray-200 text-gray-600' : 'bg-blue-100 text-blue-600'}`}&gt;ğŸ˜“ {action.stress &gt; 0 ? '+' : ''}{action.stress}&lt;/span&gt;}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:264.65pt; font-size:10.5pt"><span style="font-family:'Courier New'">{action.money !== 0 &amp;&amp; &lt;span className={`px-2 py-1 rounded-md ${action.money &lt; 0 ? 'bg-yellow-100 text-yellow-700' : 'bg-green-100 text-green-600'}`}&gt;ğŸ’° {action.money}&lt;/span&gt;}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:264.65pt; font-size:10.5pt"><span style="font-family:'Courier New'">{action.time !== 0 &amp;&amp; &lt;span className="px-2 py-1 rounded-md bg-indigo-50 text-indigo-500 ml-auto flex items-center"&gt;&lt;Clock size={10} className="mr-1"/&gt;{action.time}h&lt;/span&gt;}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:226.85pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:239.45pt; font-size:10.5pt"><span style="font-family:'Courier New'">{action.npc &amp;&amp; (</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:252.05pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div className="text-xs text-pink-500 flex items-center pt-1"&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:264.65pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;Heart size={10} className="mr-1" /&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:264.65pt; font-size:10.5pt"><span style="font-family:'Courier New'">{relationships.find(r =&gt; r.id === action.npc)?.name} {action.npcVal &gt; 0 ? '+' : ''}{action.npcVal}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:252.05pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:239.45pt; font-size:10.5pt"><span style="font-family:'Courier New'">)}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:226.85pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:201.65pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/button&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:176.45pt; font-size:10.5pt"><span style="font-family:'Courier New'">);</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:151.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">})}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:126pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:100.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:75.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:50.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:50.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">{/* Right Column: Log (3 cols) */}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:50.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div className="lg:col-span-3"&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:75.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div className="bg-white p-5 rounded-3xl shadow-sm border border-indigo-50 h-[calc(100vh-140px)] sticky top-24 flex flex-col"&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:100.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;h3 className="font-black text-gray-400 text-xs uppercase mb-4 flex items-center tracking-wider"&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:126pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;Briefcase size={14} className="mr-1"/&gt; </span><span style="font-family:'Microsoft JhengHei'">å†’éšªæ—¥èªŒ</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:100.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/h3&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:100.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div className="flex-1 overflow-y-auto text-sm space-y-3 pr-2 custom-scrollbar"&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:100.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">{logs.length === 0 &amp;&amp; &lt;p className="text-gray-400 italic text-center mt-10"&gt;</span><span style="font-family:'Microsoft JhengHei'">å†’éšªå³å°‡é–‹å§‹</span><span style="font-family:'Courier New'">...&lt;/p&gt;}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:100.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">{logs.map((log, i) =&gt; (</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:126pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div key={i} className="bg-gray-50 p-3 rounded-xl text-gray-600 border border-gray-100 text-xs leading-relaxed animate-fade-in"&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:151.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">{log}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:126pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:100.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">))}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:100.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div ref={logsEndRef} /&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:100.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:75.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:50.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:37.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:37.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">{/* Random Event Popup Overlay */}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:37.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">{popup &amp;&amp; (</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:50.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div className="fixed inset-0 bg-indigo-900/40 backdrop-blur-sm z-50 flex items-center justify-center p-4"&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:75.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div className="bg-white rounded-3xl shadow-2xl max-w-md w-full overflow-hidden animate-bounce-in border-4 border-white"&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:100.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div className="bg-yellow-400 p-6 text-white font-black text-xl flex items-center justify-center shadow-inner"&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:126pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;span className="mr-2 bg-white/20 p-2 rounded-full"&gt;{popup.icon || &lt;AlertTriangle /&gt;}&lt;/span&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:126pt; font-size:10.5pt"><span style="font-family:'Courier New'">{popup.title}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:100.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:100.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div className="p-8"&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:126pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;p className="text-gray-600 text-lg mb-8 font-medium text-center leading-relaxed"&gt;{popup.desc}&lt;/p&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:126pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div className="space-y-3"&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:151.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">{popup.choices.map((choice, idx) =&gt; (</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:176.45pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;button</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:201.65pt; font-size:10.5pt"><span style="font-family:'Courier New'">key={idx}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:201.65pt; font-size:10.5pt"><span style="font-family:'Courier New'">onClick={() =&gt; handleEventChoice(choice)}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:201.65pt; font-size:10.5pt"><span style="font-family:'Courier New'">className="w-full bg-gray-50 hover:bg-indigo-50 text-gray-800 hover:text-indigo-700 font-bold py-4 px-6 rounded-2xl transition border-2 border-gray-100 hover:border-indigo-200 shadow-sm hover:shadow-md text-left"</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:176.45pt; font-size:10.5pt"><span style="font-family:'Courier New'">&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:201.65pt; font-size:10.5pt"><span style="font-family:'Courier New'">{choice.text}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:176.45pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/button&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:151.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">))}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:126pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:100.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:75.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:50.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:37.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">)}</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">);</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">}</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">// Sub-component for Progress Bars</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">function StatBar({ icon, label, value, color, track, max }) {</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">const percentage = Math.min(100, Math.max(0, (value / max) * 100));</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">return (</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div className="bg-white border border-gray-100 rounded-xl p-2 flex flex-col justify-center shadow-sm"&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:37.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div className="flex items-center justify-between mb-1"&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:50.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div className="flex items-center text-gray-500 text-xs font-bold gap-1"&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:75.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">{icon} {label}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:50.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:50.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;span className="text-[10px] font-mono text-gray-400"&gt;{value}&lt;/span&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:37.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:37.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div className={`w-full ${track} rounded-full h-1.5`}&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:50.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;div</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:63pt; font-size:10.5pt"><span style="font-family:'Courier New'">className={`h-1.5 rounded-full transition-all duration-500 ${color}`}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:63pt; font-size:10.5pt"><span style="font-family:'Courier New'">style={{ width: `${percentage}%` }}</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:50.4pt; font-size:10.5pt"><span style="font-family:'Courier New'">&gt;&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:37.8pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:25.2pt; font-size:10.5pt"><span style="font-family:'Courier New'">&lt;/div&gt;</span></p><p style="margin-top:0pt; margin-bottom:0pt; text-indent:12.6pt; font-size:10.5pt"><span style="font-family:'Courier New'">);</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">}</span></p><p style="margin-top:0pt; margin-bottom:0pt; font-size:10.5pt"><span style="font-family:'Courier New'">&#xa0;</span></p></div></body></html>